### 1. 장애 노드 자동 식별 (Detection) ###
Slurm은 노드 상태를 감시하다가 문제가 생기면 자동으로 해당 노드를 DRAIN 또는 DOWN 상태로 바꿉니다.
* Heartbeat (Keepalive): slurm.conf의 SlurmdTimeout 시간 동안 계산 노드(slurmd)가 응답하지 않으면, Slurm 컨트롤러는 해당 노드를 DOWN으로 간주하고 작업을 배정하지 않습니다. 
* HealthCheckProgram: 관리자가 작성한 커스텀 스크립트를 주기적으로 실행합니다. (예: GPU 인식 여부, 디스크 마운트 확인 등)
* 스크립트가 0이 아닌 값(에러)을 반환하면 Slurm은 해당 노드를 즉시 DRAIN 상태로 변경하고 사유를 기록합니다. 

### 2. 자동 복구 (Recovery) ###
장애가 해결된 후 다시 작업에 투입하는 방식은 설정에 따라 다릅니다.
ReturnToService 설정: slurm.conf에서 이 값을 어떻게 설정하느냐에 따라 결정됩니다.
* ReturnToService=1: 노드가 다시 통신 가능해지면(부팅 등) 자동으로 IDLE 상태로 복구됩니다.
* ReturnToService=2: 관리자가 명시적으로 scontrol update state=resume을 하기 전까지는 DRAIN 상태를 유지합니다. (안전성을 위해 권장됨)
RebootProgram: 노드에 심각한 오류가 감지되었을 때 Slurm이 노드를 자동으로 재부팅하도록 설정할 수 있습니다. Slurm Reboot Mechanism

### 3. GPU 특정 장애 대응 (NHC 활용) ###
실제 운영 환경에서는 LBNL Node Health Check (NHC)라는 외부 툴을 Slurm과 연동하여 많이 사용합니다.
* 동작 방식: nvidia-smi를 실행해보고 GPU가 하나라도 안 보이면 NHC가 이를 감지하여 Slurm 노드 상태를 자동으로 DRAIN 시킵니다.
* 장점: Slurm 자체 기능보다 더 정교하게 하드웨어 에러(ECC 에러, XID 에러 등)를 잡아낼 수 있습니다.
